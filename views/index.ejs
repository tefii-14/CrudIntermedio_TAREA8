<%- include('./partials/header') %>
<div class="mt-3">
  <% if (modelos.length > 0) { %>
    <div class="table-responsive">
      <table class="table table-striped table-sm">
        <thead>
          <tr>
            <th>ID</th>
            <th>Marca</th>
            <th>Nombre</th>
            <th>Año</th>
            <th>Acciones</th>
          </tr>
        </thead>
        <tbody>
          <% modelos.forEach(modelo => { %>
          <tr>
            <td><%= modelo.idmodelo %></td>
            <td><%= modelo.marca %></td>
            <td><%= modelo.nombre %></td>
            <td><%= modelo.anio %></td>
            <td>
              <a href="/delete/<%= modelo.idmodelo %>" class="btn btn-sm btn-danger delete">Eliminar</a>
              <a href="/edit/<%= modelo.idmodelo %>" class="btn btn-sm btn-info">Editar</a>
            </td>
          </tr>
          <% }) %>
        </tbody>
      </table>
    </div>
  <% } else { %>
    <div class="alert alert-warning">
      <strong>No hay modelos registrados</strong>
    </div>
  <% } %>
</div>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const listaEnlaces = document.querySelectorAll(".delete")

    listaEnlaces.forEach((enlace) => {
      enlace.addEventListener("click", (event) => {
        event.preventDefault();

        Swal.fire({
          title:  'Carros Gestión',
          text:   '¿Está seguro de proceder?',
          icon: 'question',
          footer:   'Gestión de Carros',
          confirmButtonText: 'Aceptar',
          confirmButtonColor: '#2980b9',
          showCancelButton: true,
          cancelButtonText: 'Cancelar',
          cancelButtonColor: '#c0392b'
        }).then((result) => {
          if (result.isConfirmed){
            window.location.href = event.target.getAttribute("href")
          }
        })
      })
    })
  })
</script>

<%- include('./partials/footer') %>